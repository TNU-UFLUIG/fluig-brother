<div class="row">
    <div class="col-sm-12">

        <div class="page-header fs-sm-space">
            <div class="row">
                <div class="col-md-8">
                    <h2 class="fs-no-margin fs-ellipsis fs-full-width">Ação de Marketing</h2>
                </div>
                <div class="col-md-4" ng-if="!vm.finalizado">
                    <div class="pull-right">
                        <button type="button" class="btn btn-success btn-lg" ng-click="vm.enviar()">Enviar</button>
                    </div>
                </div>
            </div>
        </div>

        <ul class="nav nav-tabs clearfix" role="tablist">
            <li ng-class="{'active':vm.step==1}" ng-click="vm.currentStep>=1 ? vm.step=1 : null"><a>1. Envio de
                    Evidências</a></li>
            <li ng-class="{'active':vm.step==2, 'disabled': vm.currentStep < 2}"
                ng-click="vm.currentStep>=2 ? vm.step=2 : null"><a>2. Envio de ND</a></li>
            <li ng-class="{'active':vm.step==3, 'disabled': vm.currentStep < 3}"
                ng-click="vm.currentStep>=3 ? vm.step=3 : null"><a>3. Informações de Pagamento</a></li>
        </ul>

        <div class="panel panel-default" ng-show="vm.step == 1">
            <!-- <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label class="control-label">Status</label>
                        <h4>{{vm.Formulario.statusValidacaoEvid | uppercase}}</h4>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label class="control-label">Data</label>
                        <h4>{{vm.Formulario.dataValidacaoEvid | date:'fullDate' | uppercase}}</h4>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label class="control-label">Responsável</label>
                        <h4>{{vm.Formulario.userValidacaoEvid.colleagueName| uppercase}}</h4>
                    </div>
                </div>
            </div> -->
            <div class="panel-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="control-label">Valor Total da Verba</label>
                            <h1 class="fs-no-margin">{{vm.Formulario.valorTotalVerba | currency}}</h1>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="control-label">Resultado Apresentado</label>
                            <h1 ng-if="vm.Formulario.envioEvidenciasConcluido" class="fs-no-margin">
                                {{vm.Formulario.valorResultado | currency}}</h1>

                            <div ng-if="!vm.Formulario.envioEvidenciasConcluido">
                                <input type="text" class="form-control input-lg" name="valorResultado_i"
                                    ng-model="vm.Formulario.valorResultado" fluig-money-mask ng-blur="vm.salvar()"
                                    ng-change="vm.Formulario.diferencaResultado = vm.Formulario.valorResultado - vm.Formulario.valorTotalVerba;vm.alterado=true;">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="control-label">Diferença</label>
                            <h1 class="fs-no-margin"
                                ng-class="{'fs-color-danger':vm.Formulario.diferencaResultado > 0} ">
                                {{vm.Formulario.diferencaResultado | currency}}</h1>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label for="obsEnvioEvidencias" class="control-label">Observações</label>
                            <textarea ng-show="!vm.Formulario.envioEvidenciasConcluido"
                                fluig-error="form.obsEnvioEvidencias.$error" name="obsEnvioEvidencias" elastic
                                class="form-control input-lg"
                                placeholder="Observações do cliente no envio das evidências"
                                ng-model="vm.Formulario.obsEnvioEvidencias" ng-change="vm.alterado = true"
                                ng-blur="vm.salvar()" ng-value="vm.Formulario.obsEnvioEvidencias"></textarea>
                            <p ng-show="vm.Formulario.envioEvidenciasConcluido">
                                {{vm.Formulario.obsEnvioEvidencias || 'Sem observações'}}</p>
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-sm-3" ng-if="!vm.Formulario.envioEvidenciasConcluido">
                        <div class="drop-box fs-cursor-pointer" ngf-select="vm.selectFiles('evidencias', $files)"
                            ngf-drop="vm.selectFiles('evidencias', $files)" ng-model="files" ngf-multiple="true"
                            ngf-drag-over-class="'dragover'">
                            <h4>Clique para Selecionar ou Arraste os Arquivos Aqui</h4>
                        </div>
                    </div>

                    <div
                        ng-class="{'col-sm-9': !vm.Formulario.envioEvidenciasConcluido, 'col-sm-12': vm.Formulario.envioEvidenciasConcluido}">
                        <div class="fs-txt-center" ng-show="vm.Formulario.evidencias.length == 0">
                            <h1 class="fs-lg-space">Nenhum arquivo enviado!</h1>
                        </div>
                        <table class="table" ng-show="vm.Formulario.evidencias.length > 0">
                            <!-- <caption>Arquivos de Evidência</caption> -->
                            <thead>
                                <tr>
                                    <th class="col-sm-1" ng-show="!vm.Formulario.envioEvidenciasConcluido"></th>
                                    <th class="col-sm-3">Descrição</th>
                                    <th class="col-sm-3">Arquivo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="arquivo in vm.Formulario.evidencias" ng-if="!arquivo.removed">
                                    <td ng-show="!vm.Formulario.envioEvidenciasConcluido">
                                        <span ng-click="vm.removeArquivo(arquivo)"
                                            class="fluigicon fluigicon-md fluigicon-trash fs-cursor-pointer"></span>
                                    </td>
                                    <td>
                                        <input type="text" ng-readonly="vm.Formulario.envioEvidenciasConcluido"
                                            class="form-control" ng-model="arquivo.descricao"
                                            ng-value="arquivo.descricao" ng-change="vm.alterado = true"
                                            ng-blur="vm.salvar()">
                                    </td>
                                    <td>
                                        <a target="_blank" href="{{arquivo.url}}"> {{arquivo.nome}}</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <div class="panel panel-default">

            <div class="panel-body">
                <div class="col-sm-12">
                    {{vm.Formulario.descricaoDetalhada}}
                </div>
                <div class="col-sm-6">
                    <b>Início da Ação</b>
                    <p>{{vm.Formulario.inicioAcao | date:'fullDate'}}</p>
                </div>
                <div class="col-sm-6">
                    <b>Término da Ação</b>
                    <p>{{vm.Formulario.terminoAcao | date:'fullDate'}}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-12" ng-show="vm.show">
        <div class="panel panel-default">

            <div class="panel-heading">
                Teste
            </div>

            <div class="panel-body">

                <pre>{{vm.Formulario | json}}</pre>
            </div>
        </div>
    </div>
</div>

<!-- <button class="btn btn-default fs-float-right" ng-click="vm.show=!vm.show"></button> -->